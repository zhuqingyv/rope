(()=>{"use strict";class p{type="hook";constructor(t={},e){this.props=t,this.setState=e}proxy=t=>{if(t){const{props:e,updateTask:s,hooks:n,_htmlElement:i,...r}=t;Object.assign(this,r),(this.vm=t).hook=this}};get element(){return this.vm.element}}var t=(l,t={})=>{const a=t;let o={},u=null;return(...t)=>{let e={};var s=[...t];if(1===s.length&&(e=t[0]),2<=s.length){const[n,r,h]=s;e=new Proxy(n,{get(t){t=t[r];return h instanceof Function?h(t):t}})}t=(s,n)=>new Promise(async(t,e)=>{try{s&&"object"==typeof s&&(Object.assign(o,s),u=u||Promise.resolve().then(async()=>{Object.assign(a,o),await i.update(),n&&n instanceof Function&&n(a,o),t(a,o),o={},u=null}))}catch(t){e(t)}});const i=new p(e,t);return i.proxy(l(e,a,t)),i}};const e={};class s{static EVENT={onClick:"onclick",onInput:"oninput",onChange:"onchange"};static setAttribute=function(t,...e){var e=[...e],s=e.length;1===s&&void 0!==e[0]&&(this.props[t]=e[0]),2<=s&&this.bind(...e,this.props,t,e[2])};tempElement=document.createElement("template");updateTask=null;_htmlElement=null;type=null;props={children:[],style:{}};events={};constructor(t){this.type=t,this._htmlElement=document.createElement(this.type)}children=(...t)=>{t=[].concat(...t);return t?.length&&t.forEach(t=>{(t.parent=this).props.children.push(t),t.render(this.element)}),this};render=t=>{t&&(t.appendChild(this.element),this.update())};className=(...t)=>(this.setAttribute("className",...t),this.update(),this);id=(...t)=>(this.setAttribute("id",...t),this.update(),this);style=(...t)=>(this.setAttribute("style",...t),this.update(),this);key=(...t)=>(this.setAttribute("key",...t),this.update(),this);show=(...t)=>(this.setAttribute("show",...t),this.update(),this);setAttribute=s.setAttribute.bind(this);bind=(...t)=>{var e,s,n,i,r,h,t=[...t],l=(e,s,t,n,i)=>{Object.defineProperty(t,n,{get(){var t=e[s];return i instanceof Function?i(t):t}})};5===t.length&&([e,s,i,r,h]=t,l(e,s,i,r,h)),6===t.length&&([e,s,n,i,r,h]=t,l(e,s,i,r,h))};onClick=t=>(this.element[s.EVENT.onClick]=t,this);onInput=t=>(this.element[s.EVENT.onInput]=t,this);onChange=t=>(this.element[s.EVENT.onChange]=t,this);update=()=>(this.updateTask||(this.updateTask=Promise.resolve().then(()=>{this.__update(),this.updateTask=null})),this.updateTask);__update=()=>{var t=this.props["children"];if(this.updateCommon()){switch(this.type){case"input":var e=this.props["value"],e=String(e);this.element.value!==e&&(this.element.value=e);break;case"span":e=this.props["value"],e=String(e);this.element.innerText!==e&&(this.element.innerText=e)}t.forEach(t=>t.update())}};updateCommon=()=>{const s=this["element"];var{show:t,className:e,id:n,style:i={}}=this.props;return!1===t?this.destroy():(this.resume(),this.memo(),s.getAttribute("class")!==e&&s.setAttribute("class",e),s.getAttribute("id")!==n&&s.setAttribute("id",n),Object.entries(i).forEach(t=>{var[t,e]=t;s.style[t]!==e&&(s.style[t]=e)}),!0)};resume=()=>{this.element.parentElement||(this.tempElement.parentElement.insertBefore(this.element),this.tempElement.remove())};memo=()=>{var t=this.props["key"];null==t||e[t]||(e[t]=this.element)};createElement=()=>document.createElement(this.type);destroy=()=>{var t=this["element"];return t.parentElement&&(this.element.parentElement.insertBefore(this.tempElement,this.element),t.remove()),!1};dom=(t=()=>null)=>(t(this.element,!!this.element.parentElement),this);get element(){return this._htmlElement}set element(t){this._htmlElement||(this._htmlElement=t)}}var n=s;class i extends n{constructor(){super("div")}}function r(t,...e){return this.setAttribute(t,...e),this.update(),this}class h extends n{value=r.bind(this,"value");constructor(){super("input")}}class l extends n{value=r.bind(this,"value");constructor(){super("span")}}class a extends n{constructor(t){super("img")}src=r.bind(this,"src")}var o=t(()=>new i),u=t(()=>new l),c=t(()=>new h);t(()=>new a);class m{options={target:document.body,props:{}};constructor(t={},e){Object.assign(this.options,t),this.app=e,this.options.target.appendChild(e.vm.element)}}globalThis.UI={hooks:t,div:o,text:u,input:c,VElement:n,Tomato:m}})();